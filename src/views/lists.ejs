<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My List | MoviePass</title>
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body class="bg-darkest-grey text-off-white text-center">
    <header class="py-6 px-12 bg-darker-grey">
      <nav class="flex justify-center md:justify-around items-center">
        <ul class="flex">
          <li>
            <a
              href="/changelog"
              class="p-2 hover:text-teal hover:transition-color hover:duration-300 active:text-med-teal active:transition-colors active:duration-300 motion-reduce:hover:transition-none"
              >Changelog</a
            >
          </li>
        </ul>
        <ul class="flex">
          <li>
            <a
              href="/logout"
              class="p-2 hover:text-teal hover:transition-color hover:duration-300 active:text-med-teal active:transition-colors active:duration-300 motion-reduce:hover:transition-none"
              >Log Out</a
            >
          </li>
        </ul>
      </nav>
    </header>

    <h1 class="text-teal text-2xl tracking-tighter md:text-5xl mt-6 md:mt-12">
      My Lists
    </h1>
    <%- include('partials/createList') -%>

    <main
      class="moviesList flex justify-center items-center mb-12 px-6 md:px-0"
    >
      <ul class="text-left px-6">
        <% lists.forEach( list => { %>
        <li class="listName list-disc my-2" data-id="<%=list._id%>">
          <a
            href="/lists/<%= list.id %>"
            class="hover:text-teal hover:transition-color hover:duration-300 active:text-med-teal active:transition-colors active:duration-300 motion-reduce:hover:transition-none"
            ><%=list.listTitle%></a
          >

          <form
            action="/lists/deleteList/<%= list.id %>?_method=DELETE"
            method="post"
            class="inline"
          >
            <button class="align-middle">
              <iconify-icon
                inline
                icon="ci:trash-full"
                class="text-xl md:text-2xl hover:text-teal hover:transition-color hover:duration-300 active:text-med-teal active:transition-colors active:duration-300 motion-reduce:hover:transition-none"
                aria-label="remove movie from list"
                onclick="return confirm('Are you sure you want to delete this list?')"
              ></iconify-icon>
            </button>
          </form>
        </li>
        <% }) %>
      </ul>
    </main>
    <script src="https://code.iconify.design/iconify-icon/1.0.0/iconify-icon.min.js"></script>
  </body>
</html>
